"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[29315],{29315:(e,t,n)=>{n.d(t,{C:()=>j});n(47941),n(82526),n(57327),n(41539),n(38880),n(57658),n(89554),n(54747),n(49337),n(33321),n(69070);var r=n(15861),i=n(4942),o=n(64687),a=n.n(o),s=(n(26699),n(32023),n(74916),n(15306),n(21703),n(96647),n(70538)),c=n(29225),u=n(9669),l=n.n(u),p=n(46536),f=n(68485),d=n(1354),h=n(64041);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=(0,s.reactive)({id:"",type:"",state:{},action:"",subject:"",endpoint:"",challenges:[],is_granted:!1,purpose:""}),w=(0,s.ref)([]),O=(0,s.reactive)({totp:{id:"",is_enabled:!1,is_notifiable:!1},email:{id:"",is_enabled:!1,is_notifiable:!0},backup_code:{id:"",is_enabled:!1,is_notifiable:!0}}),m=(0,s.ref)(!1),y=(0,s.ref)(!1),_=(0,s.ref)(!1),k=(0,s.ref)(!1);function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l(),t=(0,d.b)("two_factor_authentication"),n=t.t;window.ADMIN_PAGE&&(e=p.ZP);var i=function(e){return e.includes("-")?e:e.replace(/.{4}(?=.)/g,"$&-")},o=function(e){var t;null!==(t=e.state)&&void 0!==t&&t.secret&&(e.state.secret=i(e.state.secret)),b.id=e.id,b.type=e.type,b.state=e.state,b.action=e.action,b.subject=e.subject,b.endpoint=e.endpoint,b.challenges=e.challenges,b.is_granted=e.is_granted,b.purpose=e.purpose},u=function(){o({id:"",state:{},action:"",subject:"",endpoint:"",challenges:[],is_granted:!1,purpose:""})},v=function(){o(g(g({},b),{},{challenges:[]}))},j=function(e){w.value=e},P=(0,s.ref)(""),E=function(){m.value=!1,y.value=!1,k.value=!1,_.value=!1},T=function(e){e.totp&&(O.totp=e.totp),e.email&&(O.email=e.email),e.backup_code&&(O.backup_code=e.backup_code)},x=(0,s.computed)((function(){var e;return window.me?window.me.email:null!==(e=window.TWO_FACTOR_STATE.user_email)&&void 0!==e?e:""})),C=function(){(0,h.c)(f.zG.WARNING,"",n("error_challenge_cooldown"),[{name:n("ok","common")}])},S=function(){(0,h.c)(f.zG.SUCCESS,"",n("code_sent").replace("{{user.email}}",x.value),[{name:n("ok","common")}])},Z=function(){var t=(0,r.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.B)(e.get("".concat(window.server,"auth/2fa/channels")));case 2:n=t.sent,r=n.data.data,T(r.channels);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=(0,r.Z)(a().mark((function t(n){var r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.B)(e.post("".concat(window.server,"auth/2fa/permit"),{permit_id:n}));case 2:r=t.sent,i=r.data.data,o(i.permit);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=(0,r.Z)(a().mark((function t(n){var r,i,s,u,l=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]&&l[1],i={channel_id:n,permit_id:b.id,is_resend:r},t.next=4,(0,c.B)(e.post("".concat(window.server,"auth/2fa/request-permit-challenge"),i));case 4:if(s=t.sent,u=s.data.data,!s.isErrorCodeExists("tfa_error_challenge_cooldown")||!r){t.next=10;break}return P.value=u.cooldown_in_seconds,C(),t.abrupt("return");case 10:o(u.permit),"email"===n&&r&&(E(),S());case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=(0,r.Z)(a().mark((function t(n){var r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.B)(e.post("".concat(window.server,"auth/2fa/request-action-permit"),{action:n}));case 2:if(r=t.sent,i=r.data.data,!r.isBad){t.next=6;break}return t.abrupt("return");case 6:o(i.permit);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=(0,r.Z)(a().mark((function t(n){var r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.B)(e.post("".concat(window.server,"auth/2fa/setup"),{channel_id:n}));case 2:r=t.sent,i=r.data.data,o(i.permit);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=(0,r.Z)(a().mark((function t(n){var r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.B)(e.post("".concat(window.server,"/auth/2fa/disable"),{channel_id:n}));case 2:r=t.sent,i=r.data.data,o(i.permit);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=(0,r.Z)(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.B)(e.post("".concat(window.server,"/auth/2fa/reset"),{user_id:n})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=(0,r.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.B)(e.get("".concat(window.server,"/auth/2fa/request-backup-codes")));case 2:n=t.sent,r=n.data.data,o(r.permit);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=function(){var t=(0,r.Z)(a().mark((function t(n){var r,i,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n.solution){t.next=3;break}return _.value=!0,t.abrupt("return");case 3:return t.next=5,(0,c.B)(e.post("".concat(window.server,"auth/2fa/verify"),{challenge:n}));case 5:if(i=t.sent,s=i.data.data,!i.isErrorCodeExists("tfa_error_invalid_challenge_solution")){t.next=10;break}return m.value=!0,t.abrupt("return");case 10:if(!i.isErrorCodeExists("tfa_error_challenge_has_expired")){t.next=13;break}return y.value=!0,t.abrupt("return");case 13:if(!i.isErrorCodeExists("tfa_error_max_attempts_reached")){t.next=17;break}return m.value=!1,k.value=!0,t.abrupt("return");case 17:if(o(s.permit),j(null!==(r=s.backup_codes)&&void 0!==r?r:[]),b.is_granted){t.next=21;break}return t.abrupt("return");case 21:return"user-authenticate"===b.action&&"backup_code"!==n.channel_id&&window.location.reload(),t.next=24,Z();case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=(0,s.computed)((function(){return"access"===b.type})),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return b.purpose===e},W=(0,s.computed)((function(){return b.is_granted})),G=(0,s.computed)((function(){return 0===b.challenges.length?{}:b.challenges[0]})),U=function(){var e=window.TWO_FACTOR_STATE;e&&0!==e.length&&o(e.permit)},L=function(){if(!window.TWO_FACTOR_SITE_SETTINGS)throw Error("Two-factor site settings are not available.");return window.TWO_FACTOR_SITE_SETTINGS},H=function(){if(!window.TWO_FACTOR_ACCOUNT_SETTINGS)throw Error("Two-factor site settings are not available.");return window.TWO_FACTOR_ACCOUNT_SETTINGS},V=(0,s.computed)((function(){return!!window.me.user_two_factor_settings.is_enabled}));return{permit:b,challenge:G,userEmail:x,channels:O,setPermit:o,setChannels:T,resetPermit:u,resetPermitChallenge:v,fetchChannels:Z,fetchPermitById:A,isAccessPermit:N,fetchSetupChannelPermit:I,fetchDisableChannelPermit:F,fetchBackupCodesRequest:R,fetchActionPermit:D,submitChallengeSolution:q,errorInvalidChallengeSolution:m,errorMaxAttemptsReached:k,errorChallengeExpired:y,errorEmptyVerificationCode:_,fetchPermitChallengeRequest:z,isPurposeOfPermit:M,backupCodes:w,getTwoFactorUserStateFromWindow:U,isPermitGranted:W,getSiteSettingsFromWindow:L,resetErrors:E,getAccountSettingsFromWindow:H,fetchResetUserTwoFactor:B,isAccountTwoFactorEnabled:V}}},64041:(e,t,n)=>{n.d(t,{c:()=>h});n(47941),n(82526),n(57327),n(38880),n(57658),n(49337),n(33321),n(69070);var r=n(4942),i=n(93433),o=(n(21249),n(79753),n(24812),n(92222),n(68309),n(89554),n(41539),n(54747),n(15671)),a=n(43144),s=(n(19601),n(63518)),c=n.n(s);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.Z)(this,e),e.instance||this.init(t),e.instance}return(0,a.Z)(e,[{key:"_checkParams",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?" Method signature: ".concat(r,"(message: string, title: string, options: IzitoastOptions)"):"";if(!e||e.constructor!==String)throw"Message must be a string.".concat(i);if(t&&t.constructor!==String)throw"Title must be a string.".concat(i);if(n&&n.constructor!==Object)throw"Options must be a object.".concat(i)}},{key:"_checkEventNames",value:function(e){if(!e||e.constructor!==String)throw"Event Name must be a string";if("iziToast-open"!==e&&"iziToast-close"!==e)throw"Event Name has only two possible values: iziToast-open or iziToast-close"}},{key:"_initToast",value:function(e){return e&&e.constructor!==String&&(e=document.querySelector(e)),e&&e.constructor===HTMLDivElement||(e=document.querySelector(".iziToast")),e}},{key:"_validateOptions",value:function(e){if(e&&e.constructor!==Object)throw"Options must be a object"}},{key:"_validateCallback",value:function(e){if(e&&e.constructor!==Function)throw"Callback must be a function"}},{key:"init",value:function(t){return this._izi=c(),this.options=l(l({},{zindex:99999,layout:1,balloon:!1,close:!0,closeOnEscape:!1,rtl:!1,position:"bottomRight",timeout:5e3,animateInside:!1,drag:!1,progressBar:!1,pauseOnHover:!0,resetOnHover:!1,transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},inputs:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}}),t),this._izi.settings(this.options),e.instance=this,e.instance}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkParams(e,t,n,"show"),this._izi.show(Object.assign({},n,{message:e,title:t}))}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=this._initToast(e),this._validateOptions(t),this._izi.hide(t,e)}},{key:"progress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return e=this._initToast(e),this._validateOptions(t),this._validateCallback(n),this._izi.progress(e,t,n)}},{key:"destroy",value:function(){this._izi.destroy()}},{key:"info",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkParams(e,t,n,"info"),this._izi.info(Object.assign({},n,{message:e,title:t}))}},{key:"success",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkParams(e,t,n,"success"),this._izi.success(Object.assign({},n,{message:e,title:t}))}},{key:"warning",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkParams(e,t,n,"warning"),this._izi.warning(Object.assign({},n,{message:e,title:t}))}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkParams(e,t,n,"error"),this._izi.error(Object.assign({},n,{message:e,title:t}))}},{key:"question",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkParams(e,t,n,"question"),this._izi.question(Object.assign({},n,{message:e,title:t}))}},{key:"on",value:function(e,t){this._checkEventNames(e),this._validateCallback(t),document.addEventListener(e,t)}},{key:"off",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._checkEventNames(e),document.removeEventListener(e,t)}}]),e}();function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c={notice:{class:"lw-notification--notice",icon:"ico-warning",maxWidth:"500px",position:"center",transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInMobile:"fadeIn",transitionOutMobile:"fadeOut",type:"notice"},alert:{close:!1,timeout:!1,drag:!1,progressBar:!1,overlay:!0,position:"center",transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInMobile:"fadeIn",transitionOutMobile:"fadeOut",type:"alert"},info:{class:"lw-notification--simple",icon:"ico-info",color:"author"===window.location.pathname.split("/")[1]?"blue":null,type:"info"},success:{class:"lw-notification--simple",color:"green",icon:"ico-success",type:"success"},warning:{class:"lw-notification--simple",color:"yellow",icon:"ico-warning",type:"warning"},error:{class:"lw-notification--simple",color:"red",icon:"ico-error",type:"error"}};switch(r&&(a.buttons=r.map((function(e,t){var n,r={};if(e.func){var o=e.func,a=[];if(e.args&&(a=Array.isArray(e.args)?e.args:[e.args]),"function"==typeof o){var s;o=(s=o).bind.apply(s,[null].concat((0,i.Z)(a)))}else{for(var c=o.split("."),u=c.pop(),l=window,p=0;p<c.length;p++)l=l[c[p]];o=function(){return l[u].apply(l,a)}}r.onClosing=o}var f=null!==(n=e.class)&&void 0!==n?n:"";return['<button class="'.concat(f,'"> ').concat(e.name," </button>"),function(t,n){return t.hide(r,n,e.name)},0===t]}))),e){case"notice":a=d(d({},c.notice),a);break;case"alert":a=d(d({},c.alert),a);break;case"success":a=d(d({},c.success),a);break;case"warning":a=d(d({},c.warning),a);break;case"error":a=d(d({},c.error),a);break;default:a=a=d(d({},c.info),a)}if(o&&Array.isArray(o)&&a.class&&o.forEach((function(e){a.class+=" ".concat(e)})),!s){var u=document.querySelectorAll(".iziToast-overlay , .iziToast-capsule");u.length&&u.forEach((function(e){return e.remove()}))}var l=new p;return l.show(n,t,a),l}var v="author"===window.location.pathname.split("/")[1];document.addEventListener("iziToast-opening",(function(e){var t=e.detail.type;document.querySelectorAll(".iziToast").forEach((function(e){e.dataset.view=v?"author":"user",e.dataset.type||(e.dataset.type=t)}))})),window.showMessage=h},46536:(e,t,n)=>{n.d(t,{ZP:()=>u,x7:()=>p});n(47941),n(82526),n(57327),n(41539),n(38880),n(57658),n(89554),n(54747),n(49337),n(33321),n(69070);var r=n(4942),i=(n(82772),n(26699),n(32023),n(92741));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=window.server,c=window.lw_client;i.Z.defaults.baseURL=s,i.Z.defaults.headers={accept:"application/json","Content-Type":"application/json"},i.Z.interceptors.request.use((function(e){return-1===e.url.indexOf(s)||(e.headers=a(a({},e.headers),{},{"X-Api-Version":"0.0.1"})),e}));const u=i.Z;function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||e===c)return i.Z.create();var t=i.Z.create({baseURL:"".concat(s,"author/cross-school/proxy")});return t.interceptors.request.use((function(t){return t.url.includes("http")?t:a(a({},t),{},{headers:a(a({},t.headers),{},{"X-Api-Version":"0.0.1","Lw-Target-Client":e})})})),t}function p(e,t){return a(a({},e),{},{repository:l(t)})}},1354:(e,t,n)=>{n.d(t,{b:()=>r});n(92222);function r(e){var t=window.LWTranslate;return{i18n:t,t:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return t.get("".concat(r,".").concat(n))}}}},29225:(e,t,n)=>{n.d(t,{B:()=>f});var r=n(15861),i=n(64687),o=n.n(i),a=n(4942),s=n(15671),c=n(43144);n(47941),n(89554),n(41539),n(54747),n(26833),n(82526),n(57327),n(38880),n(57658),n(49337),n(33321),n(69070);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){function e(){(0,s.Z)(this,e),this.failure=!1,this.errors={},this.response={}}return(0,c.Z)(e,[{key:"data",get:function(){return this.response.data}},{key:"isOK",get:function(){return!1===this.hasFailed&&!1===this.hasErrors}},{key:"isBad",get:function(){return!(!this.hasFailed&&!this.hasErrors)}},{key:"hasFailed",get:function(){return!0===this.failure}},{key:"hasErrors",get:function(){return!(0===Object.keys(this.errors).length)}},{key:"guardFailure",value:function(){this.failure=!this.response.data.success}},{key:"setError",value:function(e){this.errors=e}},{key:"isErrorCodeExists",value:function(e){var t=!1;return Object.values(this.data.errors).forEach((function(n){n.code===e&&(t=!0)})),t}},{key:"setResponse",value:function(e){var t;this.response=e,this.setError(l(l({},this.errors),null===(t=e.data)||void 0===t?void 0:t.errors)),this.guardFailure()}}]),e}();function f(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new p,e.prev=1,e.next=4,t;case 4:r=e.sent,n.setResponse(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n.setError(e.t0);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}}}]);