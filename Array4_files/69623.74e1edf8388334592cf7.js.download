"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[69623],{33782:(e,n,t)=>{t.d(n,{P7:()=>i,Zl:()=>a,u0:()=>o});var r=t(4950),o={name:"",description:"",icon:"",access:r.Ze.PUBLIC,is_members_allowed_to_post:!0,is_members_allowed_to_poll:!0,is_members_allowed_to_comment:!0,is_members_allowed_to_upvote:!0,is_members_allowed_to_like:!0,is_members_allowed_to_share:!0,is_members_allowed_to_upload_images:!0,is_members_allowed_to_upload_videos:!0,is_members_allowed_to_upload_files:!0,is_members_allowed_to_view_members:!0,is_members_allowed_to_sort_posts:!0,is_standalone:!1,default_post_sorting:r.Xb.CREATED_DESC,hidden_from_community:!1,moderators:[],is_invitation_required:!1},a={name:"",description:"",display_order:0,channel_ids:[]},i={GENERAL:"general",CHANNEL_ACCESS:"channelAccess",CHANNEL_MEMBERS:"channelMembers"}},87045:(e,n,t)=>{t.d(n,{z:()=>C});t(47941),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(93433),o=t(4942),a=t(15861),i=(t(68309),t(21249),t(57327),t(41539),t(26699),t(32023),t(5212),t(82526),t(41817),t(92222),t(69826),t(64687)),s=t.n(i),u=t(63420),c=t(70538),l=t(33782),d=t(56249),p=t(68485),f=t(68805),v=t(69623),m=t(29491);function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error";window.showMessage(p.zG.ERROR,n,e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Success";window.showMessage(p.zG.SUCCESS,n,e)},C=(0,u.Q_)("useAggregatedCollectionsStore",(function(){var e=(0,v.Q)(),n=(0,f.s)([]),t=(0,c.computed)((function(){return n.list.value})),o=function(){var e=(0,a.Z)(s().mark((function e(){var n,t,r,o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.fetchAuthoringAggregatedCollections();case 3:if(t=e.sent,r=t.data,o=r.data,a=r.errors,i=r.success,(null==a||!a.length)&&i){e.next=8;break}return w("An error occurred while fetching collections."),e.abrupt("return");case 8:return e.abrupt("return",null!==(n=o.collections)&&void 0!==n?n:[]);case 11:e.prev=11,e.t0=e.catch(0),w("An error occurred while fetching collections.");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)(s().mark((function e(n){var t,r,o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.createCollection(n);case 2:if(t=e.sent,r=t.data,o=r.data,a=r.errors,i=r.success,(null==a||!a.length)&&i){e.next=7;break}return w("An error occurred while creating collection."),e.abrupt("return");case 7:return g('Collection "'.concat(n.name,'" created.')),e.abrupt("return",o.collection);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)(s().mark((function e(n,t){var r,o,a,i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateCollection(n,t);case 2:if(r=e.sent,o=r.data,a=o.data,i=o.errors,u=o.success,(null==i||!i.length)&&u){e.next=7;break}return w('An error occurred while saving "'.concat(t.name,'".')),e.abrupt("return");case 7:return g('Collection "'.concat(t.name,'" saved.')),e.abrupt("return",a.collection);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)(s().mark((function e(n){var t,r,o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.deleteCollection(n);case 2:if(t=e.sent,r=t.data,o=r.data,a=r.errors,i=r.success,(null==a||!a.length)&&i){e.next=7;break}return w("Collection was not deleted due to an error."),e.abrupt("return");case 7:return e.abrupt("return",o.collection_id);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(s().mark((function e(n){var t,r,o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.saveCollectionsManagement(n);case 2:if(t=e.sent,r=t.data,o=r.data,a=r.errors,i=r.success,(null==a||!a.length)&&i){e.next=7;break}return w("Saving failed."),e.abrupt("return");case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e,n){return{id:e.id,display_order:n,channel_ids:e.channel_ids}})),e.next=3,C(t);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var r=(0,a.Z)(s().mark((function r(o){var a,u,c,l,d;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i(o);case 2:if(a=r.sent){r.next=5;break}return r.abrupt("return");case 5:return a.channels||(a.channels=[]),u=a.display_order,c=a.id,l=a.name,d=a.description,n.addItemAtIndex({id:c,name:l,description:d},u),e.previewCollectionsWithChannels.addItemAtIndex(a,u),r.next=12,b(t.value);case 12:return r.abrupt("return",a);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),y=function(){var t=(0,a.Z)(s().mark((function t(r){var o,a,i,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(r.id,r);case 2:if(o=t.sent){t.next=5;break}return t.abrupt("return");case 5:return a=o.id,i=o.name,c=o.description,n.updateItem({id:a,name:i,description:c}),e.previewCollectionsWithChannels.updateItem(o),t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var r=(0,a.Z)(s().mark((function r(o){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!o.channel_ids||0===o.channel_ids.length){r.next=2;break}return r.abrupt("return",window.showMessage(p.zG.ALERT,'Unable to remove "'.concat(o.name,'"'),"You need to remove all channels from the collection first.",[{name:"Ok"}]));case 2:return r.next=4,h(o.id,o);case 4:if(r.sent){r.next=7;break}return r.abrupt("return");case 7:return n.removeItemById(o.id),e.previewCollectionsWithChannels.removeItemById(o.id),r.next=11,b(t.value);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),S=function(){var r=(0,a.Z)(s().mark((function r(o){var a,i,u;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!((a=n.findItemIndexById(o.id))<=0)){r.next=3;break}return r.abrupt("return",console.error("The collection cannot be moved up further."));case 3:return i=n.list.value[a].id,u=n.list.value[a-1].id,n.swapItems(a,a-1),e.previewCollectionsWithChannels.updateItem({id:i,display_order:a-1}),e.previewCollectionsWithChannels.updateItem({id:u,display_order:a}),r.next=10,b(t.value);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),I=function(){var r=(0,a.Z)(s().mark((function r(o){var a,i,u;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(-1===(a=n.findItemIndexById(o.id))||a>=n.length.value-1)){r.next=3;break}return r.abrupt("return",console.error("The collection cannot be moved down further."));case 3:return i=n.list.value[a].id,u=n.list.value[a+1].id,n.swapItems(a,a+1),e.previewCollectionsWithChannels.updateItem({id:i,display_order:a+1}),e.previewCollectionsWithChannels.updateItem({id:u,display_order:a}),r.next=10,b(t.value);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),Z=function(e,r){var o=t.value.map((function(n){var t,o;return n.id===r?_(_({},n),{},{channel_ids:null===(t=n.channel_ids)||void 0===t?void 0:t.filter((function(n){return n!==e})),channels:null===(o=n.channels)||void 0===o?void 0:o.filter((function(n){return n.id!==e}))}):n}));n.setList(o)},x=function(){var r=(0,a.Z)(s().mark((function r(o,a,i,u){var c,l,d,p,v,m;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d=n.findItemById(o),(p=(0,f.s)(null!==(c=null==d?void 0:d.channel_ids)&&void 0!==c?c:[])).moveItemToIndex(u,i),(v=(0,f.s)(null!==(l=null==d?void 0:d.channels)&&void 0!==l?l:[])).moveItemToIndex(u,i),m=_(_({},d),{},{channel_ids:p.getValue(),channels:v.getValue()}),n.updateItem(m),e.previewCollectionsWithChannels.updateItem({id:m.id,channel_ids:m.channel_ids}),r.next=10,b(t.value);case 10:case"end":return r.stop()}}),r)})));return function(e,n,t,o){return r.apply(this,arguments)}}(),E=function(){var r=(0,a.Z)(s().mark((function r(o,a,i){var u,c,l,d,p,v,m;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=t.value.find((function(e){return null==e?void 0:e.channel_ids.includes(a.id)})),d=n.findItemById(o),(p=(0,f.s)(null!==(u=null==d?void 0:d.channel_ids)&&void 0!==u?u:[])).addItemAtIndex(a.id,i),(v=(0,f.s)(null!==(c=null==d?void 0:d.channels)&&void 0!==c?c:[])).addItemAtIndex(a,i),m=_(_({},d),{},{channel_ids:p.getValue(),channels:v.getValue()}),n.updateItem(m),e.previewCollectionsWithChannels.updateItem({id:m.id,channel_ids:m.channel_ids,channels:m.channels}),Z(a.id,l.id),e.handleRemoveChannelFromPreviewCollection(a.id,l.id),r.next=13,b(t.value);case 13:case"end":return r.stop()}}),r)})));return function(e,n,t){return r.apply(this,arguments)}}(),k=function(){var e=(0,a.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:t=e.sent,n.setList(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleChannelAdded:E,handleChannelMoved:x,getAggregatedCollections:t,handleSearchCollections:function(e){var t,r;return null!==(t=null===(r=n.list.value)||void 0===r?void 0:r.filter((function(n){var t,r,o=e.text.toLowerCase(),a=n.name.toLowerCase().includes(o),i=null!==(t=null===(r=n.channels)||void 0===r?void 0:r.some((function(e){return e.name.toLowerCase().includes(o)})))&&void 0!==t&&t;return!(e.text&&!a&&!i)&&(!e.collectionId||n.id===e.collectionId)})))&&void 0!==t?t:[]},handleAddNewCollection:P,handleUpdateCollection:y,handleDeleteCollection:O,handleMoveCollectionUp:S,handleMoveCollectionDown:I,handleSaveCollectionsOrder:b,buildNewCollectionProperties:function(){return _(_({},l.Zl),{},{display_order:n.length.value})},buildNewCollectionBelowProperties:function(e){var t=n.findItemIndexById(e.id);return _(_({},l.Zl),{},{display_order:t+1})},handleAddChannelToAggregatedCollection:function(e,o){var a,i={access:o.access,description:o.description,icon:o.icon,id:o.id,members_count:(0,m.W)(o.members).valid,members:null!==(a=o.members)&&void 0!==a?a:0,name:o.name,posts_count:0},s=t.value.map((function(n){var t,o;return e===n.id?_(_({},n),{},{channel_ids:[].concat((0,r.Z)(null!==(t=n.channel_ids)&&void 0!==t?t:[]),[i.id]),channels:[].concat((0,r.Z)(null!==(o=n.channels)&&void 0!==o?o:[]),[i])}):n}));n.setList(s)},handleUpdateChannelInAggregatedCollection:function(e){var r,o={access:e.access,id:e.id,members_count:(0,m.W)(e.members).valid,members:null!==(r=e.members)&&void 0!==r?r:0,name:e.name},a=t.value.map((function(e){if(e.channel_ids.includes(o.id)){var n=e.channels.map((function(e){return e.id===o.id?_(_({},e),o):e}));return _(_({},e),{},{channels:n})}return e}));n.setList(a)},handleRemoveChannelFromAggregatedCollection:Z,loadAuthoringAggregatedCollectionsState:k}}))},27108:(e,n,t)=>{t.d(n,{q:()=>w});t(47941),t(82526),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(4942),o=t(15861),a=t(64687),i=t.n(a),s=(t(69826),t(41539),t(68309),t(57327),t(63420)),u=t(70538),c=t(56249),l=t(29225),d=t(68485),p=t(33782),f=t(69623),v=t(87045),m=t(93949);function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=(0,s.Q_)("socialAuthoring",(function(){var e=(0,f.Q)(),n=(0,v.z)(),t=(0,u.ref)("Community"),r=(0,u.ref)(""),a=(0,u.ref)({}),s=(0,u.ref)({flag:!1,tab:p.P7.GENERAL}),h=(0,u.ref)(!1),w=(0,u.ref)({}),g=(0,u.ref)([]),C=(0,u.ref)([]),b=(0,u.computed)((function(){var n;if(!r.value)return null;var t=null===(n=C.value)||void 0===n?void 0:n.find((function(e){return r.value===e.id}));return t||e.flatMapOfChannels.find((function(e){return r.value===e.id}))})),P=function(e){r.value=e},y=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.P7.GENERAL,r=arguments.length>2?arguments[2]:void 0;P(null!==(e=null==n?void 0:n.id)&&void 0!==e?e:""),s.value={flag:!0,tab:t,membersFilter:r}},O=(0,u.computed)((function(){return""===r.value})),S=(0,u.computed)((function(){return!a.value.id})),I={site_social:!1,site_social_groups:[],site_disable_perunit_social:!1,site_disable_inbox:!1,site_disable_courses_social:!1,site_social_discussions_global_settings:{is_members_allowed_to_post:!1,is_members_allowed_to_poll:!1,is_members_allowed_to_comment:!1,is_members_allowed_to_upvote:!1,is_members_allowed_to_like:!1,is_members_allowed_to_share:!1,is_members_allowed_to_upload_images:!1,is_members_allowed_to_upload_videos:!1,is_members_allowed_to_upload_files:!1}},Z=function(e){w.value=e},x=function(e){g.value=e},E=function(){var e=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.FK)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.DS)(c.Z.saveSettings(w.value));case 2:case"end":return e.stop()}}),e)}))),null,!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function k(){return(k=(0,o.Z)(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.getSettings();case 2:t=e.sent,Z(_(_({},I),null===(n=t.data)||void 0===n?void 0:n.settings));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=(0,o.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.getPagesOptionsListForCommunitySettings();case 2:n=e.sent,x(n.data.pages);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return M=(0,o.Z)(i().mark((function t(r){var o,a,s,u=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=u.length>1&&void 0!==u[1]?u[1]:{},t.next=3,(0,l.B)(c.Z.createCommunityChannel(_(_({},r),{},{userSelection:o})));case 3:(a=t.sent).isBad&&window.showMessage(d.zG.ERROR,"Error","Space was not created due to an error."),a.isOK&&(s=a.data.group,e.handleAddChannelToPreviewCollection(r.collection_id,s),n.handleAddChannelToAggregatedCollection(r.collection_id,s),window.WI.track("Create space",{access:a.data.group.access,sort:a.data.group.is_members_allowed_to_sort_posts?"on":"off","show space members":a.data.group.is_members_allowed_to_view_members?"on":"off","hide space":a.data.group.hidden_from_community?"on":"off",origin:"Community"}),window.showMessage(d.zG.SUCCESS,"Space created successfully",'Space "'.concat(r.name,'" created.')));case 6:case"end":return t.stop()}}),t)}))),M.apply(this,arguments)}function U(){return U=(0,o.Z)(i().mark((function t(r,o){var a,s,u,p=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p.length>2&&void 0!==p[2]?p[2]:{},t.next=3,(0,l.B)(c.Z.updateCommunityChannel(r,_(_({},o),{},{userSelection:a})));case 3:(s=t.sent).isBad&&window.showMessage(d.zG.ERROR,"Error","Space was not saved due to an error."),s.isOK&&(u=s.data.group,e.handleUpdateChannelInPreviewCollection(u),n.handleUpdateChannelInAggregatedCollection(u),window.showMessage(d.zG.SUCCESS,"Space saved successfully",'Space "'.concat(s.data.group.name,'" updated.')));case 6:case"end":return t.stop()}}),t)}))),U.apply(this,arguments)}function R(){return(R=(0,o.Z)(i().mark((function t(r,o){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.B)(c.Z.deleteCommunityChannel(r.id,{collection_id:o}));case 2:t.sent.isOK?(e.handleRemoveChannelFromPreviewCollection(r.id,o),n.handleRemoveChannelFromAggregatedCollection(r.id,o),window.showMessage(d.zG.SUCCESS,"Space removed successfully",'Space "'.concat(r.name,'" was removed.'))):window.showMessage(d.zG.ERROR,"Error",'Space "'.concat(r.name,'" was not removed due to an error.'));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(){return(D=(0,o.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.B)(c.Z.deleteCommunityChannel(n.id));case 2:e.sent.isOK?(C.value=C.value.filter((function(e){return e.id!==n.id})),window.showMessage(d.zG.SUCCESS,"Space removed successfully",'Space "'.concat(n.name,'" was removed.'))):window.showMessage(d.zG.ERROR,"Error",'Space "'.concat(n.name,'" was not removed due to an error.'));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){a.value=e},L=function(){var e=(0,o.Z)(i().mark((function e(){var n,t,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.getCommunityChannels({courseActivitiesOnly:!0});case 3:if(n=e.sent,t=n.data,r=t.groups,o=t.errors,a=t.success,(null==o||!o.length)&&a){e.next=8;break}return window.showMessage(d.zG.ERROR,"Error","An error occurred while fetching standalone channels."),e.abrupt("return");case 8:C.value=r,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),window.showMessage(d.zG.ERROR,"Error","An error occurred while fetching standalone channels.");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return{selectedCollection:a,activeTab:t,isInChannelCreateMode:O,channelSideFormStatus:s,pages:g,selectedSpaceId:r,settings:w,courseActivityChannels:C,closeChannelSideForm:function(){j({}),P(""),s.value={flag:!1,tab:p.P7.GENERAL}},loadCommunitySettings:function(){return k.apply(this,arguments)},loadPagesOptionsListForCommunitySettings:function(){return A.apply(this,arguments)},openChannelSideForm:y,saveSettings:E,setActiveTab:function(e){t.value=e},setSelectedSpaceId:P,setSettings:Z,isCollectionSideFormOpened:h,setSelectedCollection:j,openCollectionSideForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};j(e),h.value=!0},closeCollectionSideForm:function(){h.value=!1,j({})},createChannel:function(e){return M.apply(this,arguments)},removeChannel:function(e,n){return R.apply(this,arguments)},removeCourseActivityChannel:function(e){return D.apply(this,arguments)},updateChannel:function(e,n){return U.apply(this,arguments)},setChannel:function(t){e.handleUpdateChannelInPreviewCollection(t),n.handleUpdateChannelInAggregatedCollection(t)},isInCollectionCreateMode:S,addChannelToCollection:function(e){j(e),y()},selectedSpace:b,loadCourseActivityChannels:L}}))},56249:(e,n,t)=>{t.d(n,{Z:()=>f});t(47941),t(82526),t(57327),t(41539),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(4942),o=(t(92222),t(93949)),a=t(46536);function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u={fetchCollections:function(){return a.ZP.get("/author/community/collections")},createCollection:function(e){return a.ZP.post("/author/community/collections",e)},updateCollection:function(e,n){return a.ZP.put("/author/community/collections/".concat(e),n)},deleteCollection:function(e){return a.ZP.delete("/author/community/collections/".concat(e))},fetchAuthoringAggregatedCollections:function(){return a.ZP.get("/author/community/collectionManagement")},saveCollectionsManagement:function(e){return a.ZP.put("/author/community/collectionManagement",e)},fetchAuthoringCollectionsWithChannels:function(){return a.ZP.get("/author/community/collectionsWithChannels")},fetchCollectionsWithChannels:function(){return a.ZP.get("/community/collectionsWithChannels")}},c={getCommunityChannel:function(e){return a.ZP.get("/community/group/".concat(e))},getCommunityChannels:function(e){return a.ZP.get("/author/community/groups",{params:e})},createCommunityChannel:function(e){return a.ZP.post("/author/community/groups",e)},deleteCommunityChannel:function(e,n){return a.ZP.delete("/author/community/group/".concat(e),{params:n})},updateCommunityChannel:function(e,n){return a.ZP.put("/author/community/group/".concat(e),n)},getNewPostsCounters:function(e){return a.ZP.get("/community/new_posts",{params:e})}},l={fetchPosts:function(e){var n,t=(0,o.ut)(e),r=null!==(n=t.count)&&void 0!==n?n:12;t.count&&delete t.count;var i=(0,o.RX)(s(s({},t),{},{N:r})),u=i?"?":"";return a.ZP.get("posts".concat(u).concat(i))},addPost:function(e){return a.ZP.post("posts",e)},deletePost:function(e){return a.ZP.delete("post/".concat(e))},editPost:function(e,n){return a.ZP.post("/post/".concat(e),n)},setPostPinValue:function(e,n){return a.ZP.post("/post/".concat(e,"/pin"),n)},editComment:function(e,n,t){return a.ZP.post("/post/".concat(e,"/comment/").concat(n),t)},addComment:function(e,n){return a.ZP.post("post/".concat(e,"/comment"),n)},deleteComment:function(e,n){return a.ZP.delete("/post/".concat(e,"/comment/").concat(n))},fetchPostById:function(e){return a.ZP.get("post/".concat(e))}},d={pollVote:function(e,n){return a.ZP.post("post/".concat(e,"/vote/").concat(n))},addPostLike:function(e){return a.ZP.post("post/".concat(e,"/likes"))},removePostLike:function(e){return a.ZP.delete("post/".concat(e,"/likes"))},addPostUpvote:function(e){return a.ZP.post("post/".concat(e,"/best_of"))},removePostUpvote:function(e){return a.ZP.delete("post/".concat(e,"/best_of"))},addCommentLike:function(e,n){return a.ZP.post("post/".concat(e,"/comment/").concat(n,"/likes"))},removeCommentLike:function(e,n){return a.ZP.delete("post/".concat(e,"/comment/").concat(n,"/likes"))},addCommentUpvote:function(e,n){return a.ZP.post("post/".concat(e,"/comment/").concat(n,"/best_of"))},removeCommentUpvote:function(e,n){return a.ZP.delete("post/".concat(e,"/comment/").concat(n,"/best_of"))}},p={fetchOnlineUsers:function(e){return a.ZP.get("community/online_users",{params:e})},getChannelMembers:function(e){return a.ZP.get("users",{params:e})},inviteMemberToGroup:function(e,n){return a.ZP.post("group/".concat(e,"/invite/").concat(n))},removeMember:function(e,n){return a.ZP.delete("group/".concat(n,"/members/").concat(e))},leaveChannel:function(e){return a.ZP.delete("/group/".concat(e,"/members"))},reportMember:function(e){return a.ZP.post("/user/abuse/".concat(e))},makeUserModeratorIn:function(e,n){return a.ZP.post("/author/user/".concat(e,"/mod/").concat(n))},removeUserFromModeratorIn:function(e,n){return a.ZP.delete("/author/user/".concat(e,"/mod/").concat(n))}};const f=s(s(s(s(s(s({fetchUserCourses:function(){return a.ZP.get("/community/userCourses")},getLinkPreview:function(e){return a.ZP.get("/url/info?url=".concat(e))}},{getSettings:function(){return a.ZP.get("settings/community")},saveSettings:function(e){return a.ZP.post("settings/community",e)},getPagesOptionsListForCommunitySettings:function(){return a.ZP.get("settings/site")}}),u),c),l),p),d)},68805:(e,n,t)=>{t.d(n,{s:()=>c});t(47941),t(82526),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(4942),o=t(29439),a=t(93433),i=(t(57658),t(40561),t(57327),t(41539),t(34553),t(69826),t(70538));function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,i.ref)(e),t=function(){return n.value},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.value=e},s=function(e){n.value.push(e)},c=function(e,t){n.value.splice(t,0,e)},l=function(e,t){if(!(e<0||t<0||e>=n.value.length||t>=n.value.length)){var r=[n.value[t],n.value[e]];n.value[e]=r[0],n.value[t]=r[1],n.value=(0,a.Z)(n.value)}},d=function(e,t){if(!(e<0||t<0||e>=n.value.length||t>=n.value.length)){var r=n.value.splice(e,1),a=(0,o.Z)(r,1)[0];n.value.splice(t,0,a)}},p=function(e){n.value=n.value.filter((function(n){return n.id!==e}))},f=function(e){var t=n.value.findIndex((function(n){return n.id===e.id}));-1!==t&&(n.value[t]=u(u({},n.value[t]),e),n.value=(0,a.Z)(n.value))},v=function(e){return n.value.find((function(n){return n.id===e}))},m=function(e){return n.value.findIndex((function(n){return n.id===e}))},h=(0,i.computed)((function(){return n.value.length}));return{list:n,length:h,setList:r,addItem:s,addItemAtIndex:c,swapItems:l,moveItemToIndex:d,updateItem:f,removeItemById:p,findItemById:v,findItemIndexById:m,getValue:t}}},29491:(e,n,t)=>{t.d(n,{W:()=>r});t(57327),t(41539);var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e||0===e.length)return{valid:0,joined:0,invited:0};var n=e.filter((function(e){return"549d7ee2e4b4c8b511000000"!==e.id})),t=n.length,r=n.filter((function(e){return"normal"===e.status})).length,o=n.filter((function(e){return"invited"===e.status})).length;return{valid:t,joined:r,invited:o}}},4950:(e,n,t)=>{t.d(n,{AI:()=>b,I_:()=>u,Rz:()=>y,UA:()=>d,VZ:()=>C,Xb:()=>h,Xe:()=>p,Ze:()=>s,a:()=>P,aR:()=>v,ar:()=>_,d:()=>l,fd:()=>w,i_:()=>c,jM:()=>a,p7:()=>i,qC:()=>m,sy:()=>f,tG:()=>g});var r,o=t(4942),a={attachments:[],best_of:null,comments:[],context:null,likes:null,social_object:{type:null,data:null},social_items:[],text:"",text_mentions:[]},i={best_of:null,likes:null,text:"",text_mentions:[],attachments:[],social_items:[]},s={PRIVATE:"private",PUBLIC:"public"},u={GENERAL:"general",MENTIONS:"mentions",REPLIES:"replies",COURSE_DISCUSSIONS:"course_discussions"},c={COURSE_DISCUSSION:"course",USER_GROUP:"group"},l={IMAGE:"image",POLL:"poll",LIVE_CODE:"livecode",LINK:"link",TIP:"tip"},d={IMAGE:"image",VIDEO:"video",FILE:"file",AUDIO:"audio"},p={IMAGE:"image",FILE:"file"},f={AWAITING_SCAN:"awaiting_scan",SCAN_FAILED:"scan_failed",UNSAFE:"unsafe",SAFE:"safe"},v={FEED:"feed",MEMBERS:"members"},m={PUBLIC:"social",PRIVATE:"socialAttachments"},h={CREATED_DESC:"created_desc",CREATED_ASC:"created_asc",MODIFIED_DESC:"modified_desc"},_=5,w=1,g={PRIVATE:"default_channel_private_lock",PUBLIC:"default_channel_public_hashtag"},C=(r={},(0,o.Z)(r,g.PUBLIC,"fa-hashtag"),(0,o.Z)(r,g.PRIVATE,"fa-lock"),r),b={POST:"post",COMMENT:"comment"},P={POST:1e4,COMMENT:5e3},y=20},95135:(e,n,t)=>{t.d(n,{X:()=>s});var r=t(4942),o=(t(43371),t(63420)),a=t(70538),i=Object.freeze({COMMENT:"canMemberComment",LIKE:"canMemberLike",POST:"canMemberPost",POLL:"canMemberPoll",SHARE:"canMemberShare",UPLOAD_FILES:"canMemberUploadFiles",UPLOAD_IMAGES:"canMemberUploadImages",UPLOAD_VIDEOS:"canMemberUploadVideos",UPVOTE:"canMemberUpvote",VIEW_MEMBERS:"canMemberViewMembers",SORT_POSTS:"canMemberSortPosts"}),s=(0,o.Q_)("feedPermissionsStore",(function(){var e,n=(e={},(0,r.Z)(e,i.COMMENT,!0),(0,r.Z)(e,i.LIKE,!0),(0,r.Z)(e,i.POST,!0),(0,r.Z)(e,i.POLL,!0),(0,r.Z)(e,i.SHARE,!0),(0,r.Z)(e,i.UPLOAD_FILES,!0),(0,r.Z)(e,i.UPLOAD_IMAGES,!0),(0,r.Z)(e,i.UPLOAD_VIDEOS,!0),(0,r.Z)(e,i.UPVOTE,!0),(0,r.Z)(e,i.VIEW_MEMBERS,!0),(0,r.Z)(e,i.SORT_POSTS,!0),e),t=(0,a.ref)(n),o=function(e){t.value=e};(0,a.computed)((function(){return"admin"===window.me.userRole}));return{permissions:t,setPermissions:o,buildPermissions:function(e){var t,s=e.source;if(s){if(a.default.prototype.$lwGates.canUserManagePostsInChannel(s))return o(n);o((t={},(0,r.Z)(t,i.COMMENT,s.is_members_allowed_to_comment),(0,r.Z)(t,i.LIKE,s.is_members_allowed_to_like),(0,r.Z)(t,i.POST,s.is_members_allowed_to_post),(0,r.Z)(t,i.POLL,s.is_members_allowed_to_poll),(0,r.Z)(t,i.SHARE,s.is_members_allowed_to_share),(0,r.Z)(t,i.UPLOAD_FILES,s.is_members_allowed_to_upload_files),(0,r.Z)(t,i.UPLOAD_IMAGES,s.is_members_allowed_to_upload_images),(0,r.Z)(t,i.UPLOAD_VIDEOS,s.is_members_allowed_to_upload_videos),(0,r.Z)(t,i.UPVOTE,s.is_members_allowed_to_upvote),(0,r.Z)(t,i.VIEW_MEMBERS,s.is_members_allowed_to_view_members),(0,r.Z)(t,i.SORT_POSTS,s.is_members_allowed_to_sort_posts),t))}}}}))},69623:(e,n,t)=>{t.d(n,{Q:()=>w});t(47941),t(82526),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(93433),o=t(15861),a=t(4942),i=(t(86535),t(99244),t(41539),t(21249),t(92222),t(26699),t(32023),t(57327),t(64687)),s=t.n(i),u=t(56249),c=t(70538),l=t(63420),d=t(68805),p=t(93949),f=t(29225),v=t(67141),m=t(4950);function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=(0,l.Q_)("usePreviewCollectionsStore",(function(){var e,n=(0,v.$)(),t=(0,d.s)([]),i=(0,c.ref)((e={},(0,a.Z)(e,m.I_.COURSE_DISCUSSIONS,0),(0,a.Z)(e,m.I_.MENTIONS,0),(0,a.Z)(e,m.I_.REPLIES,0),e)),l=(0,c.computed)((function(){var e;return null!==(e=t.list)&&void 0!==e?e:[]})),h=function(){var e=(0,o.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.isAuthoring){e.next=7;break}return e.next=4,(0,p.Eh)(u.Z.fetchAuthoringCollectionsWithChannels());case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,p.Eh)(u.Z.fetchCollectionsWithChannels());case 9:e.t0=e.sent;case 10:return t=e.t0,e.abrupt("return",t.data.data.collections);case 14:return e.prev=14,e.t1=e.catch(0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:t.setList(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=(0,c.computed)((function(){return t.list.flatMap((function(e){return e.channels}))}));function C(){return(C=(0,o.Z)(s().mark((function e(){var t,r,o,a,c,l,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Eh)(u.Z.getNewPostsCounters({context:"community"}));case 2:a=e.sent,c=a.data.groups,l=a.data.courses,i.value[m.I_.COURSE_DISCUSSIONS]=null!==(t=a.data.courseDiscussions)&&void 0!==t?t:0,i.value[m.I_.MENTIONS]=null!==(r=a.data.mentions)&&void 0!==r?r:0,i.value[m.I_.REPLIES]=null!==(o=a.data.replies)&&void 0!==o?o:0,c&&g.value.map((function(e){return c[e.id]&&(e.new_posts=c[e.id].new_posts),e})),l&&(d=(0,p.ut)(n.courses).map((function(e){return l[e.titleId]&&(e.new_posts=l[e.titleId].new_posts),e})),n.setCourses(d));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=(0,o.Z)(s().mark((function e(n){var r,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.Eh)(u.Z.getCommunityChannel(n),!1);case 3:r=e.sent,o=r.data.group,a=[{channels:[o]}],t.setList(a),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var P=function(e,n){var r=l.value.map((function(t){var r,o;return t.id===n?_(_({},t),{},{channel_ids:null===(r=t.channel_ids)||void 0===r?void 0:r.filter((function(n){return n!==e})),channels:null===(o=t.channels)||void 0===o?void 0:o.filter((function(n){return n.id!==e}))}):t}));t.setList(r)},y=function(){var e=(0,o.Z)(s().mark((function e(n,t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f.B,e.next=3,u.Z.leaveChannel(t);case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:e.sent.isOK&&P(t,r);case 8:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}();return{flatMapOfChannels:g,getPreviewCollectionsWithChannels:l,previewCollectionsWithChannels:t,aggregatedFeedNewPostCount:i,handleLeaveChannel:y,handleAddChannelToPreviewCollection:function(e,n){var o=l.value.map((function(t){var o,a;return e===t.id?_(_({},t),{},{channel_ids:[].concat((0,r.Z)(null!==(o=t.channel_ids)&&void 0!==o?o:[]),[n.id]),channels:[].concat((0,r.Z)(null!==(a=t.channels)&&void 0!==a?a:[]),[n])}):t}));t.setList(o)},handleUpdateChannelInPreviewCollection:function(e){var n=l.value.map((function(n){if(n.channel_ids.includes(e.id)){var t=n.channels.map((function(n){return n.id===e.id?e:n}));return _(_({},n),{},{channels:t})}return n}));t.setList(n)},handleRemoveChannelFromPreviewCollection:P,loadPreviewCollectionsWithChannelsState:w,loadChannelForStandaloneFeed:function(e){return b.apply(this,arguments)},loadNewPostsCounters:function(){return C.apply(this,arguments)},resetAggregatedFeedNewPostCount:function(e){e&&(i.value[e]=0)}}}))},67141:(e,n,t)=>{t.d(n,{$:()=>b});t(82526),t(57327),t(38880),t(49337),t(33321),t(69070);var r=t(29439),o=t(15861),a=t(4942),i=t(64687),s=t.n(i),u=(t(69826),t(41539),t(89554),t(54747),t(47941),t(79753),t(34553),t(40561),t(26699),t(32023),t(2707),t(57658),t(66992),t(88674),t(78783),t(33948),t(63420)),c=t(70538),l=t(93949),d=t(56249),p=t(29225),f=t(4950),v=t(41162),m=t(69623),h=t(95135),_=t(27108);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var C=f.Xb.MODIFIED_DESC,b=(0,u.Q_)("socialContent",(function(){var e=(0,m.Q)(),n=(0,h.X)(),t=(0,_.q)(),i=(0,c.ref)({}),u=(0,c.ref)([]),w=(0,c.ref)(null),b=(0,c.ref)([]),P=(0,c.ref)(null),y=(0,c.ref)([]),O=(0,c.ref)(f.aR.FEED),S=(0,c.ref)(C),I=(0,c.ref)(null),Z=(0,c.ref)(null),x=(0,c.ref)(null),E=(0,c.ref)(null),k=(0,c.ref)(!1),A=(0,c.ref)(!1),M=(0,c.ref)(!1),U=(0,c.ref)(null),R=(0,c.ref)({}),D=(0,c.computed)((function(){var n;if(!w.value)return null;if(u.value.find((function(e){var n=e.titleId;return w.value===n})))return f.i_.COURSE_DISCUSSION;var r=e.flatMapOfChannels.find((function(e){var n=e.id;return w.value===n})),o=null==t||null===(n=t.courseActivityChannels)||void 0===n?void 0:n.find((function(e){return w.value===e.id}));return r||o?f.i_.USER_GROUP:null})),j=(0,c.computed)((function(){var n;if(!w.value)return null;if(D.value===f.i_.COURSE_DISCUSSION)return u.value.find((function(e){return w.value===e.titleId}));var r=null==t||null===(n=t.courseActivityChannels)||void 0===n?void 0:n.find((function(e){return w.value===e.id}));return r||e.flatMapOfChannels.find((function(e){return w.value===e.id}))})),L=(0,c.computed)((function(){var e,n=null!==(e=U.value)&&void 0!==e?e:function(){var e={};return P.value===f.I_.MENTIONS&&(e.my="text_mentions"),P.value===f.I_.REPLIES&&(e.my="replies"),P.value===f.I_.COURSE_DISCUSSIONS&&(e.my="course_discussions"),Z.value&&(e.context=Z.value),x.value&&(e.parent_context=x.value),D.value===f.i_.USER_GROUP&&(e.group_id=w.value),e}();return I.value&&(n.query=I.value),n}));function T(e){i.value=null!=e?e:{}}function N(e,n){i.value[e]&&Object.keys(n).forEach((function(t){return(0,l.D5)(i.value[e],t,n[t])}))}function B(e){I.value=e||null}function F(e,n){Z.value=e,x.value=n}function G(e){E.value=Array.isArray(e)&&e.length>0?e:null}function W(e){var n=(0,l.ut)(i.value);n[e.id]&&delete n[e.id],T(g((0,a.Z)({},e.id,e),n))}function V(e){S.value=e}function z(e){P.value=e}function K(e){O.value=e}function Q(e){w.value=e}function X(e){u.value=e}function q(n){if(n&&0!==n.new_posts)if(n.titleId){var t=u.value.find((function(e){var t=e.titleId;return n.titleId===t}));t&&(t.new_posts=0)}else{var r,o=null===(r=e.getPreviewCollectionsWithChannels)||void 0===r?void 0:r.findIndex((function(e){return e.channel_ids.includes(n.id)}));if(o<0)return;var a=e.getPreviewCollectionsWithChannels[o].channels.findIndex((function(e){return e.id===n.id}));if(a<0)return;e.previewCollectionsWithChannels.list[o].channels[a].new_posts=0}}function H(){return $.apply(this,arguments)}function $(){return($=(0,o.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=D.value===f.i_.COURSE_DISCUSSION?{course:j.value.titleId}:{group:j.value.id},e.next=3,(0,p.B)(d.Z.fetchOnlineUsers(n));case 3:if(!(t=e.sent).isOK){e.next=6;break}return e.abrupt("return",t.data.users);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,n){return J.apply(this,arguments)}function J(){return(J=(0,o.Z)(s().mark((function e(n,t){var r,o,a,i,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.value=null===(r=null==t?void 0:t.setLoading)||void 0===r||r,e.next=3,(0,p.B)(d.Z.fetchPosts(g(g({},n),{},{sort:null!==(o=n.sort)&&void 0!==o?o:S.value,getPinnedPosts:null!==(a=null==t?void 0:t.getPinnedPosts)&&void 0!==a&&a})));case 3:if(!(i=e.sent).isOK||!i.data.posts){e.next=9;break}return c=Array.isArray(i.data.posts)?{}:i.data.posts,(null===(u=null==t?void 0:t.saveData)||void 0===u||u)&&T(c),k.value=!1,e.abrupt("return",c);case 9:return i.isBad&&window.userImpersonation&&window.displayError(i.data.errors),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return ne.apply(this,arguments)}function ne(){return(ne=(0,o.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.Eh)(d.Z.fetchUserCourses(),!1);case 3:t=e.sent,X(null!==(n=t.data.userCourses)&&void 0!==n?n:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error loading user courses: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function te(){return(te=(0,o.Z)(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=[]).push(t.loadCommunitySettings()),r.push(e.loadPreviewCollectionsWithChannelsState()),n.t0=r,n.next=6,ee();case 6:return n.t1=n.sent,n.t0.push.call(n.t0,n.t1),n.next=10,Promise.all(r);case 10:return n.next=12,e.loadNewPostsCounters();case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function re(){return(re=(0,o.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.B)(d.Z.fetchPostById(n));case 2:(t=e.sent).isOK&&t.data.post&&W(t.data.post);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=(0,o.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.B)(d.Z.deletePost(n));case 2:return(t=e.sent).isOK&&(delete(r=g({},i.value))[n],T(r)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=(0,o.Z)(s().mark((function e(n,t){var r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.B)(d.Z.deleteComment(n,t));case 2:if(!e.sent.isOK){e.next=12;break}if(r=i.value[n],!((o=r.comments.findIndex((function(e){return e.comment_id===t})))<0)){e.next=9;break}return console.error("Error on comment delete"),e.abrupt("return");case 9:r.comments.splice(o,1),e.next=13;break;case 12:console.error("Error on comment delete");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return ie=(0,o.Z)(s().mark((function e(n){var t,r,o,a,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(i.length>1&&void 0!==i[1])||i[1],r=!(i.length>2&&void 0!==i[2])||i[2],!t||!R.value[n]){e.next=4;break}return e.abrupt("return",R.value[n]);case 4:return e.next=6,(0,p.B)(v.Z.getUserData(n,{socialUserCard:!0}));case 6:if(!(o=e.sent).isOK){e.next=11;break}return a=o.data.user,r&&(R.value[n]=a),e.abrupt("return",a);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function se(){return ue.apply(this,arguments)}function ue(){return(ue=(0,o.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.value&&j.value){e.next=2;break}return e.abrupt("return");case 2:return(n=[]).push(Y(L.value,{saveData:!1,getPinnedPosts:!0})),n.push(H()),e.abrupt("return",Promise.all(n).then((function(e){var n=(0,r.Z)(e,2);i.value=n[0],b.value=n[1]})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=(0,o.Z)(s().mark((function e(r){var o,a,i,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(r),i=D.value===f.i_.COURSE_DISCUSSION,u=i?{save:[j.value.title,j.value.titleId],load:j.value.titleId}:{save:null,load:null},z(null),V(null!==(o=null===(a=j.value)||void 0===a?void 0:a.default_post_sorting)&&void 0!==o?o:C),K(f.aR.FEED),B(null),G(u.save),F(u.load),q(j.value),e.next=12,se();case 12:c=i?g(g({},t.settings.site_social_discussions_global_settings),{},{context:j.value.titleId}):j.value,n.buildPermissions({source:c});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=(0,o.Z)(s().mark((function n(t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return z(t),Q(null),V(C),K(f.aR.FEED),B(null),G(null),F(null),n.next=9,Y(L.value,{getPinnedPosts:!0});case 9:e.resetAggregatedFeedNewPostCount(t);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function de(){return(de=(0,o.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(n),e.next=3,this.fetchPosts(L.value,{getPinnedPosts:!0});case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function pe(){return(pe=(0,o.Z)(s().mark((function e(n,t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(n,r),G(t),e.next=4,Y(L.value,{getPinnedPosts:!0});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=(0,o.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=!i.value[n].is_pinned,N(n,{is_pinned:t}),e.next=5,(0,l.Eh)(d.Z.setPostPinValue(n,{is_pinned:t}),!1);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return{aggregatedPostQuery:U,cachedUserData:R,channelMembers:y,context:P,courses:u,postsSaveContext:E,feedUserPermissions:(0,c.computed)((function(){return n.permissions})),fetchPostsQuery:L,isPostsLoading:k,isAuthoring:A,isStandaloneRenderer:M,mainView:O,members:b,posts:i,postsSortBy:S,searchTerm:I,selectedChannel:j,selectedChannelId:w,selectedChannelType:D,loadUserCourses:ee,prependPost:W,replacePost:function(e){i.value[e.id]?i.value[e.id]=e:console.error("Post with id ".concat(e.id," not found"))},updateComment:function(e,n){var t=i.value[e];if(t){var r=t.comments.findIndex((function(e){return e.comment_id===n.comment_id}));r<0?console.error("Comment with id ".concat(n.id," not found")):t.comments.splice(r,1,n)}else console.error("Post with id ".concat(e," not found"))},setSearchTerm:B,deleteComment:function(e,n){return ae.apply(this,arguments)},deletePostById:function(e){return oe.apply(this,arguments)},fetchPostById:function(e){return re.apply(this,arguments)},fetchPosts:Y,getUserData:function(e){return ie.apply(this,arguments)},loadCommunityData:function(){return te.apply(this,arguments)},selectChannel:function(e){return ce.apply(this,arguments)},selectContext:function(e){return le.apply(this,arguments)},setMainView:K,setPosts:T,setChannelId:Q,setContext:z,setCourses:X,setIsAuthoring:function(e){A.value=e},setIsStandaloneRenderer:function(e){M.value=e},setSortingAndLoadPosts:function(e){return de.apply(this,arguments)},setPostsContextAndLoadPosts:function(e,n,t){return pe.apply(this,arguments)},togglePinPost:function(e){return fe.apply(this,arguments)},updatePostProperties:N,setAggregatedPostQuery:function(e){U.value=e}}}))}}]);